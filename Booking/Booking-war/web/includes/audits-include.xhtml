<?xml version='1.0' encoding='UTF-8' ?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://java.sun.com/jsf/facelets" 
                xmlns:h="http://java.sun.com/jsf/html" 
                xmlns:f="http://java.sun.com/jsf/core" 
                xmlns:p="http://primefaces.org/ui" 
                xmlns:c="http://java.sun.com/jsp/jstl/core"> 

    <h:form id="auditsForm"> 

        <h3>#{txt['audits']}</h3>

        <div class="row"> 
            <div class="grid-100"> 
                <div class="row"> 
                    <div class="grid-75"> 
                        <div class="grid-15 pad-h-10">
                            #{txt['from']} 
                        </div> 
                        <div class="grid-75"> 
                            <p:calendar id="fromDate" value="#{auditsController.fromDate}" showOn="button" styleClass="dropdownReportsL" pattern="#{dateFormatController.dateFormatString}" required="true" requiredMessage="#{txt['msg_please_select_the_from_date']}" /> 
                            <h:message for="fromDate" errorClass="fieldError" infoClass="fieldSuccess" /> 
                        </div> 
                        <div class="grid-15 pad-h-10">
                            #{txt['to']} 
                        </div> 
                        <div class="grid-75"> 
                            <p:calendar id="toDate" value="#{auditsController.toDate}" showOn="button" styleClass="dropdownReports" pattern="#{dateFormatController.dateFormatString}" required="true" requiredMessage="#{txt['msg_please_select_the_to_date']}" /> 
                            <br /> 
                            <h:message for="toDate" errorClass="fieldError" infoClass="fieldSuccess" /> 
                        </div> 
                    </div> 
                </div> 
                <h:panelGroup> 
                    <div class="row"> 
                        <div class="grid-75"> 
                            <div class="grid-15 pad-h-10"> 
                                <h:outputLabel for="audit-type-select" value="#{txt['audit_type']}: " /> 
                            </div> 
                            <div class="grid-75"> 
                                <h:selectOneMenu id="audit-type-select" value="#{auditsController.selectedAuditType}"> 
                                    <f:selectItems value="#{auditsController.auditTypes}" /> 
                                </h:selectOneMenu> 
                            </div> 
                            <div class="grid-100"> 
                                <h:outputText value="" style="color: red" /> 
                                <h:message for="audit-type-select" errorClass="fieldError" infoClass="fieldSuccess" /> 
                            </div> 
                        </div> 
                    </div> 
                </h:panelGroup> 
            </div> 
        </div> 

        <!--        <h:panelGroup rendered="#{auditsController.userRole eq 'MANAGER' or auditsController.userRole eq 'BANK_ADMIN' 
                                              or auditsController.userRole eq 'BRANCH_ADMIN' or auditsController.userRole eq 'AGENTS'}"> 
                        <div class="row custom-style-grid"> 
                            <div class="grid-75"> 
                                <div class="grid-15 pad-h-10"> 
                                    <h:outputLabel for="role-select" value="#{txt['role']}:  " /> 
                                </div> 
                                <div class="grid-75"> 
                                    <h:selectOneMenu id="role-select" value="#{auditsController.selectedUserRole}"> 
                                        <f:selectItems value="#{auditsController.userRoleList}" /> 
                                    </h:selectOneMenu> 
                                </div> 
                                <div class="grid-100"> 
                                    <h:outputText value="" style="color: red" /> 
                                    <h:message for="role-select" errorClass="fieldError" infoClass="fieldSuccess" /> 
                                </div> 
                            </div> 
                        </div> 
                    </h:panelGroup> -->

        <div class="row custom-style-grid"> 
            <div class="grid-75"> 
                <div class="grid-15 pad-h-10"> 
                </div> 
                <div class="grid-75"> 
                    <h:commandButton action="#{auditsController.search()}" styleClass="submit green_button" value="#{txt['b_search']}" /> 
                </div> 
            </div> 
        </div> 
    </h:form> 
    <div class="clear" style="margin-top:10px;"></div> 
    <div class="paid-out-bottom"> 
        <div class="sub-title-page sub-title-blue"> 
            <h3>#{txt['records']}</h3> 
        </div> 
        <h:form id="transaction-form"> 
            <h:panelGroup id="summary-panel"> 
                <table class="common-table text-center"> 
                    <thead> 
                        <th>#{txt['date']}</th> 
                        <th>#{txt['role']}</th> 
                        <th>#{txt['name']}</th> 
                        <th>#{txt['action']}</th> 
                        <th>#{txt['object_id']}</th> 
                        <th>#{txt['ip_address']}</th> 
                    </thead> 
                    <ui:repeat var="audit" value="#{auditsController.auditList}" varStatus="status"> 
                        <tr class="${status.index % 2 == 1 ? 'firstRow' : 'secondRow'}"> 
                            <td> 
                                <h:outputText value="#{audit.createdDate}"> 
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" /> 
                                </h:outputText> </td> 
                            <td> 
                                <h:outputText value="#{audit.user.userRole.role}" /> </td> 
                            <td> 
                                <h:outputText value="#{audit.user.getFullName()}" /> </td> 
                            <td> 
                                <h:outputText value="#{audit.action}" /> </td> 
                            <td> 
                                <h:outputText value="#{audit.actionObjectId}" /> </td> 
                            <td> 
                                <h:outputText value="#{audit.ip}" /> </td> 
                        </tr> 
                    </ui:repeat> 
                    <c:if test="#{auditsController.auditList eq null or auditsController.auditList.size() eq 0}"> 
                        <tr> 
                            <td colspan="8"> 
                                <h:outputText value="#{txt['empty_records']}"></h:outputText> </td> 
                        </tr> 
                    </c:if> 
                </table> 
                <br /> 
            </h:panelGroup> 
        </h:form> 
    </div> 
</ui:composition>